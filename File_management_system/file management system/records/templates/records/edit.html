{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit File Record - File Management System</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <div class="container">
        <header class="fms-header">
            <div class="fms-header-logo-wrap">
                <img src="{% static 'images/logo.png' %}" alt="College Logo" class="fms-logo">
            </div>
            <div class="fms-header-text">
                <h1 class="fms-title">File Management System</h1>
                <p class="fms-subtitle">Edit File Record</p>
            </div>
        </header>

        {% if messages %}
            <div class="messages">
                {% for message in messages %}
                    <div class="alert alert-{% if message.tags %}{{ message.tags }}{% else %}info{% endif %}">
                        {{ message }}
                        <button type="button" class="close-btn" onclick="this.parentElement.style.display='none';">&times;</button>
                    </div>
                {% endfor %}
            </div>
        {% endif %}

        <div class="content-wrapper">
            <section class="edit-section">
                <h2>Edit Record #{{ record.id }}</h2>
                
                <div class="record-info">
                    <p><strong>File Name:</strong> {{ record.file_name }}</p>
                    <p><strong>File Type:</strong> <span class="badge badge-{{ record.file_type|lower }}">{{ record.file_type }}</span></p>
                    <p><strong>Uploaded:</strong> {{ record.upload_datetime|date:"Y-m-d H:i:s" }}</p>
                </div>

                <form method="POST" enctype="multipart/form-data" id="editForm" class="edit-form">
                    {% csrf_token %}
                    
                    <div class="form-group">
                        <label for="id_description">Description *</label>
                        {{ form.description }}
                        {% if form.description.errors %}
                            <span class="error">{{ form.description.errors.0 }}</span>
                        {% endif %}
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="id_file_date">File Date</label>
                            {{ form.file_date }}
                            {% if form.file_date.errors %}
                                <span class="error">{{ form.file_date.errors.0 }}</span>
                            {% endif %}
                        </div>
                        
                        <div class="form-group">
                            <label for="id_letter_reference_number">Letter Reference Number</label>
                            {{ form.letter_reference_number }}
                            {% if form.letter_reference_number.errors %}
                                <span class="error">{{ form.letter_reference_number.errors.0 }}</span>
                            {% endif %}
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="id_file">Select File (optional - leave blank to keep current file)</label>
                        {{ form.file }}
                        {% if form.file.errors %}
                            <span class="error">{{ form.file.errors.0 }}</span>
                        {% endif %}
                        <small class="form-help">Current file: {{ record.file_name }}</small>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">Update Record</button>
                        <a href="/" class="btn btn-secondary">Cancel</a>
                    </div>
                </form>
            </section>
        </div>
    </div>

    <script src="{% static 'js/script.js' %}"></script>
</body>
</html>
